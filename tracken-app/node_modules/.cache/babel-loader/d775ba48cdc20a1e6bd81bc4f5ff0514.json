{"ast":null,"code":"import _defineProperty from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/vlad/Desktop/repos/jfdd11-nan-app/src/components/SendParcel/SendParcel.js\";\nimport React, { Component } from \"react\";\nimport { Form, Input, Button, Segment, Header, Popup } from \"semantic-ui-react\";\nimport ContactsBook from \"../ContactsBook/ContactsBook\";\nimport firebase from \"firebase\";\nimport DayPickerInput from \"react-day-picker/DayPickerInput\";\nimport \"react-day-picker/lib/style.css\";\nimport moment from \"moment\";\nimport \"./SendParcel.css\";\nvar initialState = {\n  selectedDay: \"\",\n  recipientName: \"\",\n  phone: \"\",\n  city: \"\",\n  email: \"\",\n  postalCode: \"\",\n  streetName: \"\",\n  streetNumber: \"\",\n  country: \"\",\n  parcelWeight: \"\",\n  parcelDepth: \"\",\n  parcelHeight: \"\",\n  parcelWidth: \"\",\n  lat: \"\",\n  lng: \"\"\n};\nvar googleApiKey = \"AIzaSyAUsnERWvgUrNKQy4YvHAaeg99HdhJLpTM\";\n\nvar SendParcel =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SendParcel, _Component);\n\n  function SendParcel() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SendParcel);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SendParcel)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = initialState;\n\n    _this.addParcel = function () {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state,\n          selectedDay = _ref.selectedDay,\n          recipientName = _ref.recipientName,\n          phone = _ref.phone,\n          city = _ref.city,\n          postalCode = _ref.postalCode,\n          streetName = _ref.streetName,\n          streetNumber = _ref.streetNumber,\n          country = _ref.country,\n          email = _ref.email,\n          parcelWeight = _ref.parcelWeight,\n          parcelDepth = _ref.parcelDepth,\n          parcelHeight = _ref.parcelHeight,\n          parcelWidth = _ref.parcelWidth,\n          lat = _ref.lat,\n          lng = _ref.lng;\n\n      firebase.database().ref(\"packages\").push({\n        date_send: selectedDay ? selectedDay : moment(new Date()).format(\"YYYY-MM-DD\"),\n        client_id: _this.props.clientID,\n        delivery: {\n          name: recipientName,\n          phone: phone,\n          city: city,\n          postalcode: postalCode,\n          street: streetName,\n          number: streetNumber,\n          country: country,\n          email: email\n        },\n        dimensions: {\n          weight: parcelWeight,\n          depth: parcelDepth,\n          height: parcelHeight,\n          width: parcelWidth\n        },\n        latitude: lat,\n        longitude: lng,\n        status: \"pending\",\n        date_order: moment(new Date()).format(\"YYYY-MM-DD\")\n      });\n    };\n\n    _this.syncGeoLocation = function () {\n      return fetch(\"https://maps.googleapis.com/maps/api/geocode/json?key=\\n    \".concat(googleApiKey, \"&address=\").concat(_this.state.city, \"+\").concat(_this.state.postalCode, \"+\").concat(_this.state.streetName, \"+\").concat(_this.state.streetNumber)).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        return data.results;\n      }).then(function (results) {\n        return results[0].geometry.location;\n      }).then(function (coords) {\n        return _this.setState({\n          lat: coords.lat,\n          lng: coords.lng\n        });\n      });\n    };\n\n    _this.handleChange = function (event) {\n      var id = event.target.id;\n      var value = event.target.value;\n\n      _this.setState(_defineProperty({}, id, value));\n    };\n\n    _this.handleDayChange = function (selectedDay, modifiers, dayPickerInput) {\n      var input = dayPickerInput.getInput();\n\n      _this.setState({\n        selectedDay: moment(selectedDay).format(\"YYYY-MM-DD\"),\n        isEmpty: !input.value.trim(),\n        isValidDay: typeof selectedDay !== \"undefined\",\n        isDisabled: modifiers.disabled === true\n      });\n    };\n\n    _this.handleSendParcel = function (event) {\n      event.preventDefault();\n\n      _this.syncGeoLocation().then(function () {\n        _this.addParcel();\n\n        _this.setState(initialState);\n\n        _this.props.refreshView();\n\n        _this.props.closeSendParcel();\n      });\n    };\n\n    _this.handleCopyContact = function (contact) {\n      _this.setState({\n        recipientName: \"\".concat(contact.company_name, \" \").concat(contact.name, \" \").concat(contact.surname),\n        phone: contact.phone,\n        city: contact.city,\n        email: contact.email,\n        postalCode: contact.postalcode,\n        streetName: contact.street,\n        streetNumber: contact.number,\n        country: contact.country\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SendParcel, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Form, {\n        onSubmit: this.handleSendParcel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Segment, {\n        color: \"purple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(Header, {\n        as: \"h4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Please fill the form below to send a new package\"), React.createElement(Segment, {\n        color: \"purple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sendParcel_div--pickerandpopup\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(DayPickerInput, {\n        placeholder: moment(new Date()).format(\"YYYY-MM-DD\"),\n        onDayChange: this.handleDayChange,\n        selectedDay: this.state.selectedDay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(Popup, {\n        keepInViewPort: true,\n        trigger: React.createElement(Button, {\n          type: \"button\",\n          content: \"Contacts Book\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }),\n        on: \"click\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(ContactsBook, {\n        perPage: 2,\n        onCopyContact: this.handleCopyContact,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      })))), React.createElement(Header, {\n        as: \"h4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Recipient details\"), React.createElement(Segment, {\n        color: \"purple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        widths: \"equal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Form.Field, {\n        id: \"recipientName\",\n        control: Input,\n        label: \"Recipient name\",\n        placeholder: \"Recipient name\",\n        value: this.state.recipientName,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        id: \"city\",\n        control: Input,\n        label: \"City\",\n        placeholder: \"City\",\n        value: this.state.city,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        id: \"postalCode\",\n        control: Input,\n        label: \"Postal Code\",\n        placeholder: \"Postal Code\",\n        value: this.state.postalCode,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        id: \"streetName\",\n        control: Input,\n        label: \"Street name\",\n        placeholder: \"Street name\",\n        value: this.state.streetName,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        id: \"streetNumber\",\n        control: Input,\n        label: \"Street number\",\n        placeholder: \"Steet number\",\n        value: this.state.streetNumber,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        id: \"country\",\n        control: Input,\n        label: \"Country\",\n        placeholder: \"Country\",\n        value: this.state.country,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        id: \"phone\",\n        control: Input,\n        label: \"Phone number\",\n        placeholder: \"Phone number\",\n        value: this.state.phone,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        id: \"email\",\n        control: Input,\n        label: \"Email\",\n        placeholder: \"Email\",\n        value: this.state.email,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }))), React.createElement(Header, {\n        as: \"h4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"Parcel details\"), React.createElement(Segment, {\n        color: \"purple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        widths: \"equal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(Form.Field, {\n        id: \"parcelWeight\",\n        control: Input,\n        label: \"Parcel weight\",\n        placeholder: \"Parcel weight\",\n        value: this.state.parcelWeight,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        id: \"parcelWidth\",\n        control: Input,\n        label: \"Parcel width\",\n        placeholder: \"Parcel width\",\n        value: this.state.parcelWidth,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        id: \"parcelHeight\",\n        control: Input,\n        label: \"Parcel height\",\n        placeholder: \"Parcel height\",\n        value: this.state.parcelHeight,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        id: \"parcelDepth\",\n        control: Input,\n        label: \"Parcel depth\",\n        placeholder: \"Parcel depth\",\n        value: this.state.parcelDepth,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }))), React.createElement(Segment, {\n        basic: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, React.createElement(Form.Field, {\n        id: \"sendParcel\",\n        control: Button,\n        content: \"Send parcel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return SendParcel;\n}(Component);\n\nexport default SendParcel;","map":{"version":3,"sources":["/home/vlad/Desktop/repos/jfdd11-nan-app/src/components/SendParcel/SendParcel.js"],"names":["React","Component","Form","Input","Button","Segment","Header","Popup","ContactsBook","firebase","DayPickerInput","moment","initialState","selectedDay","recipientName","phone","city","email","postalCode","streetName","streetNumber","country","parcelWeight","parcelDepth","parcelHeight","parcelWidth","lat","lng","googleApiKey","SendParcel","state","addParcel","database","ref","push","date_send","Date","format","client_id","props","clientID","delivery","name","postalcode","street","number","dimensions","weight","depth","height","width","latitude","longitude","status","date_order","syncGeoLocation","fetch","then","response","json","data","results","geometry","location","coords","setState","handleChange","event","id","target","value","handleDayChange","modifiers","dayPickerInput","input","getInput","isEmpty","trim","isValidDay","isDisabled","disabled","handleSendParcel","preventDefault","refreshView","closeSendParcel","handleCopyContact","contact","company_name","surname"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Input, Button, Segment, Header, Popup } from \"semantic-ui-react\";\nimport ContactsBook from \"../ContactsBook/ContactsBook\";\nimport firebase from \"firebase\";\n\nimport DayPickerInput from \"react-day-picker/DayPickerInput\";\nimport \"react-day-picker/lib/style.css\";\nimport moment from \"moment\";\n\nimport \"./SendParcel.css\";\n\nconst initialState = {\n  selectedDay: \"\",\n  recipientName: \"\",\n  phone: \"\",\n  city: \"\",\n  email: \"\",\n  postalCode: \"\",\n  streetName: \"\",\n  streetNumber: \"\",\n  country: \"\",\n  parcelWeight: \"\",\n  parcelDepth: \"\",\n  parcelHeight: \"\",\n  parcelWidth: \"\",\n  lat: \"\",\n  lng: \"\"\n};\nconst googleApiKey = \"AIzaSyAUsnERWvgUrNKQy4YvHAaeg99HdhJLpTM\";\n\nclass SendParcel extends Component {\n  state = initialState;\n\n  addParcel = (\n    {\n      selectedDay,\n      recipientName,\n      phone,\n      city,\n      postalCode,\n      streetName,\n      streetNumber,\n      country,\n      email,\n      parcelWeight,\n      parcelDepth,\n      parcelHeight,\n      parcelWidth,\n      lat,\n      lng\n    } = this.state\n  ) => {\n    firebase\n      .database()\n      .ref(\"packages\")\n      .push({\n        date_send: selectedDay\n          ? selectedDay\n          : moment(new Date()).format(\"YYYY-MM-DD\"),\n        client_id: this.props.clientID,\n        delivery: {\n          name: recipientName,\n          phone,\n          city,\n          postalcode: postalCode,\n          street: streetName,\n          number: streetNumber,\n          country,\n          email\n        },\n        dimensions: {\n          weight: parcelWeight,\n          depth: parcelDepth,\n          height: parcelHeight,\n          width: parcelWidth\n        },\n        latitude: lat,\n        longitude: lng,\n        status: \"pending\",\n        date_order: moment(new Date()).format(\"YYYY-MM-DD\")\n      });\n  };\n\n  syncGeoLocation = () =>\n    fetch(\n      `https://maps.googleapis.com/maps/api/geocode/json?key=\n    ${googleApiKey}&address=${this.state.city}+${this.state.postalCode}+${\n        this.state.streetName\n      }+${this.state.streetNumber}`\n    )\n      .then(response => response.json())\n      .then(data => data.results)\n      .then(results => results[0].geometry.location)\n      .then(coords =>\n        this.setState({\n          lat: coords.lat,\n          lng: coords.lng\n        })\n      );\n\n  handleChange = event => {\n    const id = event.target.id;\n    const value = event.target.value;\n    this.setState({\n      [id]: value\n    });\n  };\n\n  handleDayChange = (selectedDay, modifiers, dayPickerInput) => {\n    const input = dayPickerInput.getInput();\n    this.setState({\n      selectedDay: moment(selectedDay).format(\"YYYY-MM-DD\"),\n      isEmpty: !input.value.trim(),\n      isValidDay: typeof selectedDay !== \"undefined\",\n      isDisabled: modifiers.disabled === true\n    });\n  };\n\n  handleSendParcel = event => {\n    event.preventDefault();\n    this.syncGeoLocation().then(() => {\n      this.addParcel();\n      this.setState(initialState);\n      this.props.refreshView();\n      this.props.closeSendParcel();\n    });\n  };\n\n  handleCopyContact = contact => {\n    this.setState({\n      recipientName: `${contact.company_name} ${contact.name} ${\n        contact.surname\n      }`,\n      phone: contact.phone,\n      city: contact.city,\n      email: contact.email,\n      postalCode: contact.postalcode,\n      streetName: contact.street,\n      streetNumber: contact.number,\n      country: contact.country\n    });\n  };\n\n  render() {\n    return (\n      <Form onSubmit={this.handleSendParcel}>\n        <Segment color=\"purple\">\n          <Header as=\"h4\">\n            Please fill the form below to send a new package\n          </Header>\n          <Segment color=\"purple\">\n            <div className=\"sendParcel_div--pickerandpopup\">\n              <DayPickerInput\n                placeholder={moment(new Date()).format(\"YYYY-MM-DD\")}\n                onDayChange={this.handleDayChange}\n                selectedDay={this.state.selectedDay}\n              />\n  \n              <Popup\n                keepInViewPort\n                trigger={<Button type=\"button\" content=\"Contacts Book\" />}\n                on=\"click\"\n              >\n                <ContactsBook\n                  perPage={2}\n                  onCopyContact={this.handleCopyContact}\n                />\n              </Popup>\n            </div>\n          </Segment>\n          <Header as=\"h4\">Recipient details</Header>\n          <Segment color=\"purple\">\n            <Form.Group widths=\"equal\">\n              <Form.Field\n                id=\"recipientName\"\n                control={Input}\n                label=\"Recipient name\"\n                placeholder=\"Recipient name\"\n                value={this.state.recipientName}\n                onChange={this.handleChange}\n              />\n              <Form.Field\n                id=\"city\"\n                control={Input}\n                label=\"City\"\n                placeholder=\"City\"\n                value={this.state.city}\n                onChange={this.handleChange}\n              />\n              <Form.Field\n                id=\"postalCode\"\n                control={Input}\n                label=\"Postal Code\"\n                placeholder=\"Postal Code\"\n                value={this.state.postalCode}\n                onChange={this.handleChange}\n              />\n              <Form.Field\n                id=\"streetName\"\n                control={Input}\n                label=\"Street name\"\n                placeholder=\"Street name\"\n                value={this.state.streetName}\n                onChange={this.handleChange}\n              />\n              <Form.Field\n                id=\"streetNumber\"\n                control={Input}\n                label=\"Street number\"\n                placeholder=\"Steet number\"\n                value={this.state.streetNumber}\n                onChange={this.handleChange}\n              />\n              <Form.Field\n                id=\"country\"\n                control={Input}\n                label=\"Country\"\n                placeholder=\"Country\"\n                value={this.state.country}\n                onChange={this.handleChange}\n              />\n              <Form.Field\n                id=\"phone\"\n                control={Input}\n                label=\"Phone number\"\n                placeholder=\"Phone number\"\n                value={this.state.phone}\n                onChange={this.handleChange}\n              />\n              <Form.Field\n                id=\"email\"\n                control={Input}\n                label=\"Email\"\n                placeholder=\"Email\"\n                value={this.state.email}\n                onChange={this.handleChange}\n              />\n            </Form.Group>\n          </Segment>\n          <Header as=\"h4\">Parcel details</Header>\n          <Segment color=\"purple\">\n            <Form.Group widths=\"equal\">\n              <Form.Field\n                id=\"parcelWeight\"\n                control={Input}\n                label=\"Parcel weight\"\n                placeholder=\"Parcel weight\"\n                value={this.state.parcelWeight}\n                onChange={this.handleChange}\n              />\n              <Form.Field\n                id=\"parcelWidth\"\n                control={Input}\n                label=\"Parcel width\"\n                placeholder=\"Parcel width\"\n                value={this.state.parcelWidth}\n                onChange={this.handleChange}\n              />\n              <Form.Field\n                id=\"parcelHeight\"\n                control={Input}\n                label=\"Parcel height\"\n                placeholder=\"Parcel height\"\n                value={this.state.parcelHeight}\n                onChange={this.handleChange}\n              />\n              <Form.Field\n                id=\"parcelDepth\"\n                control={Input}\n                label=\"Parcel depth\"\n                placeholder=\"Parcel depth\"\n                value={this.state.parcelDepth}\n                onChange={this.handleChange}\n              />\n            </Form.Group>\n          </Segment>\n          <Segment basic>\n            <Form.Field\n              id=\"sendParcel\"\n              control={Button}\n              content=\"Send parcel\"\n            />\n          </Segment>\n        </Segment>\n      </Form>\n    );\n  }\n}\n\nexport default SendParcel;\n"]},"metadata":{},"sourceType":"module"}