{"ast":null,"code":"import _objectSpread from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/vlad/Desktop/repos/jfdd11-nan-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/vlad/Desktop/repos/jfdd11-nan-app/src/components/ContactsBook/ContactsBook.js\";\nimport React, { Component } from \"react\";\nimport { Button } from \"semantic-ui-react\";\nimport firebase from \"firebase\";\nimport \"./ContactsBook.css\";\nimport { withAuth } from \"../../contexts/AuthContext\";\n\nvar ContactsBook =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ContactsBook, _Component);\n\n  function ContactsBook() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ContactsBook);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ContactsBook)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      searchPhrase: \"\",\n      pagination: 0\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState({\n        searchPhrase: event.target.value\n      });\n    };\n\n    _this.handlePaginationChange = function (event) {\n      var paginationPage = event.target.value;\n\n      _this.setState({\n        pagination: paginationPage * (_this.props.perPage || 10)\n      });\n    };\n\n    _this.deleteContact = function (event) {\n      var contactId = event.target.id;\n      var user = _this.props.authContext.user;\n      firebase.database().ref('users').child(user.uid).child(\"contactsBook\").child(contactId).set(null);\n    };\n\n    return _this;\n  }\n\n  _createClass(ContactsBook, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          pagination = _this$state.pagination,\n          searchPhrase = _this$state.searchPhrase;\n      var contactsBook = this.props.authContext.userData.contactsBook;\n      var recordsOnPage = this.props.perPage || 10;\n      var shearchedContactBook = contactsBook.map(function (contact) {\n        return _objectSpread({}, contact, {\n          searchData: (contact.company_name + contact.name + contact.surname.street).toLowerCase()\n        });\n      }).filter(function (contact) {\n        return contact.searchData.includes(searchPhrase.toLowerCase());\n      });\n      return React.createElement(\"div\", {\n        className: \"ContactsBook\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ui input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        placeholder: \"Search...\",\n        value: searchPhrase,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      })), React.createElement(\"table\", {\n        className: \"ui celled table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \"Company name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"Surname\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"City\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"Postal code\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Street\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Number\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Phone\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"NIP\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, shearchedContactBook.map(function (contact) {\n        return React.createElement(\"tr\", {\n          key: contact.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, contact.company_name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, contact.name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, contact.surname), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, contact.city), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, contact.postalcode), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, contact.street), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, contact.number), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, contact.phone), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, contact.email), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, contact.nip), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: function onClick() {\n            return _this2.props.onCopyContact(contact);\n          },\n          circular: true,\n          color: \"facebook\",\n          icon: \"copy\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }), React.createElement(Button, {\n          id: contact.id,\n          onClick: _this2.deleteContact,\n          circular: true,\n          color: \"red\",\n          icon: \"delete\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        })));\n      }).slice(pagination, pagination + recordsOnPage))), React.createElement(\"div\", {\n        className: \"pagination\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, Array.from({\n        length: Math.ceil(shearchedContactBook.length / recordsOnPage)\n      }).map(function (button, index) {\n        return React.createElement(\"button\", {\n          className: \"ui button\",\n          key: index,\n          value: index,\n          onClick: _this2.handlePaginationChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, index + 1);\n      })));\n    }\n  }]);\n\n  return ContactsBook;\n}(Component);\n\nexport default withAuth(ContactsBook);","map":{"version":3,"sources":["/home/vlad/Desktop/repos/jfdd11-nan-app/src/components/ContactsBook/ContactsBook.js"],"names":["React","Component","Button","firebase","withAuth","ContactsBook","state","searchPhrase","pagination","handleChange","event","setState","target","value","handlePaginationChange","paginationPage","props","perPage","deleteContact","contactId","id","user","authContext","database","ref","child","uid","set","contactsBook","userData","recordsOnPage","shearchedContactBook","map","contact","searchData","company_name","name","surname","street","toLowerCase","filter","includes","city","postalcode","number","phone","email","nip","onCopyContact","slice","Array","from","length","Math","ceil","button","index"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Button } from \"semantic-ui-react\";\nimport firebase from \"firebase\";\nimport \"./ContactsBook.css\";\nimport { withAuth } from \"../../contexts/AuthContext\";\n\nclass ContactsBook extends Component {\n  state = {\n    searchPhrase: \"\",\n    pagination: 0,\n  }\n  handleChange = event => {\n    this.setState({\n      searchPhrase: event.target.value\n    });\n  };\n  handlePaginationChange = event => {\n    const paginationPage = event.target.value;\n    this.setState({\n      pagination: paginationPage * (this.props.perPage || 10)\n    });\n  };\n  deleteContact =  event => {\n    const contactId = event.target.id\n    const { user } = this.props.authContext;\n      firebase\n        .database()\n        .ref('users')\n        .child(user.uid)\n        .child(\"contactsBook\")\n        .child(contactId)\n        .set(null)\n  }\n\n  render() {\n    const { pagination, searchPhrase } = this.state;\n    const {\n      userData: { contactsBook }\n    } = this.props.authContext;\n    const recordsOnPage = this.props.perPage || 10;\n    const shearchedContactBook = contactsBook.map(contact => ({\n      ...contact,\n      searchData: (\n        contact.company_name +\n        contact.name +\n        contact.surname.street\n      ).toLowerCase()\n    }))\n    .filter(contact => contact.searchData.includes(searchPhrase.toLowerCase()))\n    return (\n      <div className=\"ContactsBook\">\n        <div className=\"ui input\">\n              <input\n                placeholder=\"Search...\"\n                value={searchPhrase}\n                onChange={this.handleChange}\n              />\n            </div>\n        <table className=\"ui celled table\">\n          <thead>\n            <tr>\n              <th>Company name</th>\n              <th>Name</th>\n              <th>Surname</th>\n              <th>City</th>\n              <th>Postal code</th>\n              <th>Street</th>\n              <th>Number</th>\n              <th>Phone</th>\n              <th>Email</th>\n              <th>NIP</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            {shearchedContactBook.map(contact => (\n              <tr key={contact.id}>\n                <td>{contact.company_name}</td>\n                <td>{contact.name}</td>\n                <td>{contact.surname}</td>\n                <td>{contact.city}</td>\n                <td>{contact.postalcode}</td>\n                <td>{contact.street}</td>\n                <td>{contact.number}</td>\n                <td>{contact.phone}</td>\n                <td>{contact.email}</td>\n                <td>{contact.nip}</td>\n                <td><Button onClick={() => this.props.onCopyContact(contact)} circular color='facebook' icon='copy' />\n                <Button id={contact.id} onClick={this.deleteContact} circular color='red' icon='delete' />\n                </td>\n              </tr>\n            )).slice(pagination, pagination + recordsOnPage)}\n          </tbody>\n        </table>\n        <div className=\"pagination\">\n            {Array.from({\n              length: Math.ceil(shearchedContactBook.length / recordsOnPage)\n            }).map((button, index) => (\n              <button\n                className=\"ui button\"\n                key={index}\n                value={index}\n                onClick={this.handlePaginationChange}\n              >\n                {index + 1}\n              </button>\n            ))}\n          </div>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(ContactsBook);\n"]},"metadata":{},"sourceType":"module"}